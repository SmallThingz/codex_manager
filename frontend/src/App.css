@import url("https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@300;400;500;700&family=IBM+Plex+Mono:wght@400;500&display=swap");

:root {
  --bg: #edf0f3;
  --surface: #f8fafc;
  --panel-accounts: #e4e8ed;
  --panel-archived: #ece7e4;
  --panel-depleted: #e6e6e7;
  --panel-frozen: #dde9f1;
  --card: #ffffff;
  --popup: #f2f5f8;
  --line: #a6b1be;
  --line-soft: #c1c9d2;
  --text: #1b2633;
  --text-soft: #536070;
  --pill: #dde4ec;
  --pill-active: #1b2633;
  --pill-active-text: #f2f5f9;
  --danger: #b4232a;
  --progress-bg: #d2d9e3;
  --progress-total: #8f9caf;
}

:root[data-theme="dark"] {
  --bg: #12161d;
  --surface: #1a2029;
  --panel-accounts: #1f2732;
  --panel-archived: #292420;
  --panel-depleted: #26282d;
  --panel-frozen: #1a2531;
  --card: #222b37;
  --popup: #1d2530;
  --line: #536275;
  --line-soft: #404d5f;
  --text: #e8eef6;
  --text-soft: #acb7c7;
  --pill: #2e3847;
  --pill-active: #e8eef6;
  --pill-active-text: #151c26;
  --danger: #ff7d86;
  --progress-bg: #2d3a4c;
  --progress-total: #72839c;
}

* {
  box-sizing: border-box;
}

html,
body,
#root {
  height: 100%;
}

html {
  scrollbar-width: thin;
  scrollbar-color: var(--line) transparent;
}

body {
  margin: 0;
  font-family: "IBM Plex Sans", "Segoe UI", sans-serif;
  color: var(--text);
  background: var(--bg);
  overflow: hidden;
}

body.drag-select-lock,
body.drag-select-lock * {
  user-select: none !important;
  -webkit-user-select: none !important;
}

.app-root {
  height: 100vh;
  display: grid;
  grid-template-rows: auto auto minmax(0, 1fr);
  overflow: hidden;
  user-select: none;
  -webkit-user-select: none;
}

.shell {
  width: min(1160px, calc(100vw - 2rem));
  margin: 0 auto;
  padding: 1rem 0 1.4rem;
  display: grid;
  gap: 1rem;
}

.window-bar {
  height: 2.2rem;
  width: 100%;
  margin: 0;
  border: 0;
  background: var(--surface);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 0.4rem 0 0.7rem;
  user-select: none;
  cursor: grab;
  -webkit-app-region: drag;
  --webui-app-region: drag;
  app-region: drag;
}

.window-title {
  margin: 0;
  font-size: 0.72rem;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: var(--text-soft);
}

.window-drag-area {
  flex: 1;
  min-width: 1rem;
  height: 100%;
  -webkit-app-region: drag;
  --webui-app-region: drag;
  app-region: drag;
}

.window-controls {
  display: flex;
  gap: 0.3rem;
  cursor: default;
  -webkit-app-region: no-drag;
  --webui-app-region: no-drag;
  app-region: no-drag;
}

.window-btn {
  width: 1.7rem;
  height: 1.45rem;
  padding: 0;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.window-btn svg {
  width: 0.92rem;
  height: 0.92rem;
  stroke: currentColor;
  stroke-width: 1.9;
  fill: none;
  stroke-linecap: round;
  stroke-linejoin: round;
}

.window-btn-close {
  color: var(--danger);
  border-color: var(--danger);
}

.window-btn-close:hover:enabled {
  background: var(--danger);
  color: #ffffff;
}

.topbar {
  width: 100%;
  border: 0;
  background: var(--surface);
  padding: 1.05rem 1.2rem;
  display: flex;
  justify-content: space-between;
  align-items: start;
  gap: 0.8rem;
  position: relative;
  z-index: 22;
}

.topbar-main {
  min-width: 0;
  cursor: grab;
  -webkit-app-region: drag;
  --webui-app-region: drag;
  app-region: drag;
}

button,
input,
a,
[role="button"] {
  -webkit-app-region: no-drag;
  --webui-app-region: no-drag;
  app-region: no-drag;
}

.topbar h1 {
  margin: 0;
  font-size: clamp(1.15rem, 2.2vw, 1.55rem);
  letter-spacing: 0.02em;
}

.topbar p {
  margin: 0.34rem 0 0;
  font-size: 0.9rem;
  color: var(--text-soft);
}

.top-actions {
  display: flex;
  gap: 0.5rem;
  position: relative;
}

.add-menu-wrap {
  position: relative;
  z-index: 30;
}

.settings-wrap {
  position: relative;
  z-index: 31;
}

.add-menu-wrap > .icon-btn,
.settings-wrap > .icon-btn {
  position: relative;
  z-index: 120;
}

.content-scroll {
  min-height: 0;
  overflow: auto;
  overscroll-behavior: contain;
  scrollbar-width: thin;
  scrollbar-color: var(--line) transparent;
}

.content-scroll::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

.content-scroll::-webkit-scrollbar-track {
  background: transparent;
}

.content-scroll::-webkit-scrollbar-thumb {
  background: var(--line);
  border: 2px solid transparent;
  background-clip: padding-box;
  border-radius: 999px;
}

.content-scroll::-webkit-scrollbar-corner {
  background: transparent;
}

:root[data-theme="dark"] .content-scroll::-webkit-scrollbar-thumb {
  background: var(--progress-total);
}

.panel {
  border: 0;
  padding: 1rem;
}

.panel-accounts {
  background: var(--panel-accounts);
  order: 10;
}

.panel-archived {
  background: var(--panel-archived);
}

.panel-depleted {
  background: var(--panel-depleted);
  order: 30;
}

.panel-frozen {
  background: var(--panel-frozen);
  order: 20;
}

.panel h2 {
  margin: 0;
  font-size: 0.84rem;
  text-transform: uppercase;
  letter-spacing: 0.14em;
}

.boot-panel {
  background: var(--surface);
  display: grid;
  gap: 0.9rem;
}

.boot-title {
  margin: 0;
  font-size: 1rem;
  letter-spacing: 0.05em;
  text-transform: uppercase;
}

.boot-pulse {
  width: min(480px, 100%);
  height: 0.44rem;
  background: var(--progress-bg);
  position: relative;
  overflow: hidden;
}

.boot-pulse::after {
  content: "";
  position: absolute;
  inset: 0;
  transform: translateX(-100%);
  background: linear-gradient(90deg, transparent, var(--line), transparent);
  animation: boot-sweep 940ms linear infinite;
}

.boot-skeleton-grid {
  display: grid;
  gap: 0.7rem;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
}

.boot-skeleton-card {
  height: 8.5rem;
  background: var(--card);
  border: 1px solid var(--line-soft);
  position: relative;
  overflow: hidden;
}

.boot-skeleton-card::after {
  content: "";
  position: absolute;
  inset: 0;
  transform: translateX(-100%);
  background: linear-gradient(90deg, transparent, rgb(255 255 255 / 0.12), transparent);
  animation: boot-sweep 1.1s linear infinite;
}

.section-head {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 0.6rem;
  margin-bottom: 0.9rem;
}

.section-actions {
  display: flex;
  align-items: center;
  gap: 0.45rem;
}

.notice {
  border: 0;
  background: var(--surface);
  padding: 0.64rem 0.8rem;
  font-size: 0.88rem;
}

.notice.error {
  border: 1px dashed var(--line-soft);
}

button {
  border: 1px solid var(--line-soft);
  background: transparent;
  color: var(--text);
  border-radius: 0;
  font: inherit;
  font-size: 0.78rem;
  line-height: 1.2;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  padding: 0.5rem 0.66rem;
  cursor: pointer;
  transition: background-color 120ms ease, color 120ms ease, border-color 120ms ease;
}

button:hover:enabled {
  background: var(--line);
  color: var(--bg);
}

button:disabled {
  opacity: 0.48;
  cursor: not-allowed;
}

input {
  border: 1px solid var(--line-soft);
  background: transparent;
  color: var(--text);
  border-radius: 0;
  font: inherit;
  font-size: 0.78rem;
  line-height: 1.2;
  padding: 0.5rem 0.66rem;
}

select {
  border: 1px solid var(--line-soft);
  background: transparent;
  color: var(--text);
  border-radius: 0;
  font: inherit;
  font-size: 0.78rem;
  line-height: 1.2;
  padding: 0.45rem 0.66rem;
}

.icon-btn {
  width: 2rem;
  height: 2rem;
  padding: 0;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.icon-btn svg {
  width: 1.1rem;
  height: 1.1rem;
  stroke: currentColor;
  stroke-width: 1.9;
  fill: none;
  stroke-linecap: round;
  stroke-linejoin: round;
}

.icon-btn svg.icon-frost {
  width: 1rem;
  height: 1rem;
  stroke-width: 2;
  stroke: #6b99bc;
}

:root[data-theme="dark"] .icon-btn svg.icon-frost {
  stroke: currentColor;
}

.icon-btn.danger-icon {
  color: var(--danger);
  border-color: var(--danger);
}

.icon-btn.danger-icon:hover:enabled {
  background: var(--danger);
  color: #ffffff;
}

.empty-state {
  border: 0;
  padding: 1.1rem;
  display: grid;
  gap: 0.7rem;
  justify-items: start;
}

.automation-options {
  display: grid;
  gap: 0.55rem;
  margin-bottom: 0.9rem;
}

.automation-option {
  display: grid;
  grid-template-columns: auto 1fr;
  gap: 0.55rem;
  align-items: start;
  border: 1px solid var(--line-soft);
  background: var(--surface);
  padding: 0.55rem 0.6rem;
}

.automation-option input {
  margin: 0.25rem 0 0;
}

.automation-option .mono {
  margin-top: 0.24rem;
}

.accounts-grid {
  display: grid;
  gap: 0.8rem;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  position: relative;
}

.account {
  border: 1px solid var(--line-soft);
  background: var(--card);
  padding: 0.9rem;
  display: grid;
  gap: 0.68rem;
  contain: layout paint;
  user-select: none;
  cursor: grab;
  transition:
    opacity 120ms ease,
    border-color 120ms ease,
    transform 140ms ease,
    margin-top 140ms ease,
    box-shadow 140ms ease;
}

.account.active {
  border-color: var(--line);
}

.account.archived {
  opacity: 0.92;
}

.account.account-depleted {
  background: linear-gradient(180deg, rgb(0 0 0 / 0.02), transparent), var(--card);
  border-color: #adb4bf;
  filter: saturate(0.28) contrast(0.92);
}

:root[data-theme="dark"] .account.account-depleted {
  border-color: #4f5968;
  background: linear-gradient(180deg, rgb(255 255 255 / 0.02), transparent), var(--card);
}

.account.account-frozen {
  position: relative;
  border-color: #6b99bc;
  background:
    linear-gradient(145deg, rgb(233 246 255 / 0.72), rgb(208 231 250 / 0.34)),
    linear-gradient(180deg, rgb(136 190 228 / 0.26), transparent 68%),
    var(--card);
  box-shadow:
    inset 0 0 0 1px rgb(126 176 214 / 0.34),
    0 0 0 1px rgb(107 153 188 / 0.24);
}

.account.account-frozen::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  background-image:
    linear-gradient(125deg, rgb(139 193 235 / 0.28), transparent 54%),
    repeating-linear-gradient(
      135deg,
      rgb(115 176 224 / 0.24) 0 1.5px,
      transparent 1.5px 10px
    );
  mix-blend-mode: normal;
}

:root[data-theme="dark"] .account.account-frozen {
  background:
    linear-gradient(145deg, rgb(197 224 245 / 0.06), rgb(164 200 231 / 0.01)),
    linear-gradient(180deg, rgb(103 149 189 / 0.12), transparent 66%),
    var(--card);
  box-shadow: inset 0 0 0 1px rgb(153 198 232 / 0.1);
}

:root[data-theme="dark"] .account.account-frozen::before {
  background-image:
    linear-gradient(125deg, rgb(255 255 255 / 0.18), transparent 54%),
    repeating-linear-gradient(
      135deg,
      rgb(183 219 246 / 0.12) 0 1px,
      transparent 1px 10px
    );
  mix-blend-mode: screen;
}

.account.dragging {
  opacity: 0.45;
  transform: scale(0.995);
  cursor: grabbing;
}

.account.drag-context {
  transition-duration: 140ms;
}

.account.drop-before {
  position: relative;
  transform: translateY(0.84rem);
}

.account.drop-before::after {
  content: "";
  position: absolute;
  left: 0.72rem;
  right: 0.72rem;
  top: -0.58rem;
  height: 0.22rem;
  border-radius: 999px;
  background: var(--line);
  box-shadow: 0 0 0 1px var(--line-soft);
  pointer-events: none;
}

.drop-surface {
  border: 1px dashed transparent;
  transition: box-shadow 120ms ease, border-color 120ms ease, background 120ms ease;
}

.drop-surface.drag-active {
  border-color: var(--line-soft);
}

.drop-surface.drop-hot {
  border-color: var(--line);
  box-shadow: inset 0 0 0 1px var(--line-soft);
}

.accounts-grid.drop-tail {
  padding-bottom: 0.7rem;
}

.accounts-grid.drop-tail::after {
  content: "";
  grid-column: 1 / -1;
  height: 0.22rem;
  margin-top: 0.08rem;
  border-radius: 999px;
  background: var(--line);
  box-shadow: 0 0 0 1px var(--line-soft);
}

.account-head {
  display: flex;
  justify-content: space-between;
  align-items: start;
  gap: 0.5rem;
}

.account-title {
  margin: 0;
  font-size: 1rem;
  font-weight: 500;
}

.account-main {
  min-width: 0;
  flex: 1;
}

.account-main-value {
  user-select: text;
  -webkit-user-select: text;
  cursor: text;
}

.drag-handle {
  width: 2.25rem;
  height: 2.25rem;
  flex: 0 0 auto;
  cursor: grab;
  pointer-events: auto;
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  -webkit-touch-callout: none;
  touch-action: none;
}

.drag-handle:active {
  cursor: grabbing;
}

.drag-handle svg {
  width: 1.14rem;
  height: 1.14rem;
  pointer-events: none;
  -webkit-user-drag: none;
}

.pill {
  margin: 0;
  padding: 0.22rem 0.5rem;
  border: 1px solid var(--line-soft);
  background: var(--pill);
  font-size: 0.66rem;
  letter-spacing: 0.08em;
  text-transform: uppercase;
}

.pill-active {
  border-color: var(--pill-active);
  background: var(--pill-active);
  color: var(--pill-active-text);
}

.mini-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 0.52rem;
}

.credit-bars {
  display: grid;
  gap: 0.62rem;
}

.credit-bar-item {
  display: grid;
  gap: 0.36rem;
}

.credit-bar-head {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 0.55rem;
}

.credit-value {
  margin: 0;
  font-weight: 500;
}

.credit-value.align-right {
  text-align: right;
}

.progress-track {
  width: 100%;
  height: 0.68rem;
  border: 0;
  background: var(--progress-bg);
}

.progress-fill {
  height: 100%;
  transition: width 180ms ease-out;
}

.progress-available {
  background: var(--line);
}

.progress-total {
  background: var(--progress-total);
}

.rate-limits-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 0.52rem;
}

.rate-limits-item {
  background: var(--surface);
  padding: 0.4rem 0.48rem;
  display: grid;
  gap: 0.36rem;
}

.rate-limit-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.5rem;
}

.limit-track {
  width: 100%;
  height: 0.58rem;
  background: var(--progress-bg);
}

.limit-fill {
  height: 100%;
  background: var(--line);
  transition: width 180ms ease-out;
}

.icon-rotor {
  transform-origin: center;
  animation: icon-rotor 880ms linear infinite;
}

.label {
  margin: 0;
  font-size: 0.66rem;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--text-soft);
}

.mono {
  margin: 0.16rem 0 0;
  font-family: "IBM Plex Mono", "Fira Code", monospace;
  font-size: 0.82rem;
  overflow-wrap: anywhere;
}

.account-copyable {
  user-select: text;
  -webkit-user-select: text;
  cursor: text;
}

.muted {
  color: var(--text-soft);
}

.card-actions {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.55rem;
}

.switch-btn {
  flex: 1;
  min-width: 0;
  text-align: center;
}

.icon-actions {
  display: flex;
  gap: 0.4rem;
}

.drag-preview {
  position: fixed;
  top: -1000px;
  left: -1000px;
  width: 190px;
  border: 1px solid var(--line-soft);
  background: var(--card);
  color: var(--text);
  padding: 0.48rem 0.56rem;
  box-shadow: 0 8px 18px rgb(0 0 0 / 0.16);
  pointer-events: none;
  z-index: 9999;
}

.drag-preview-title {
  font-size: 0.84rem;
  font-weight: 600;
  line-height: 1.25;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.drag-preview-meta {
  margin-top: 0.22rem;
  font-family: "IBM Plex Mono", "Fira Code", monospace;
  font-size: 0.73rem;
  color: var(--text-soft);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.context-menu {
  position: absolute;
  top: 0;
  right: 0;
  width: min(520px, calc(100vw - 2rem));
  z-index: 100;
  border: 1px solid var(--line-soft);
  background: var(--popup);
  padding: 0.9rem;
  display: grid;
  gap: 0.8rem;
  box-shadow: 0 8px 20px rgb(0 0 0 / 0.14);
}

.settings-menu {
  width: min(620px, calc(100vw - 2rem));
}

.settings-section {
  display: grid;
  gap: 0.55rem;
}

.context-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.6rem;
}

.context-actions {
  display: grid;
  gap: 0.55rem;
}

.context-row {
  display: grid;
  gap: 0.45rem;
  grid-template-columns: 1fr auto;
  align-items: center;
}

.context-row input {
  min-width: 0;
}

.helper {
  margin: 0;
}

.reveal {
  animation: fade-in 220ms ease-out both;
}

@keyframes fade-in {
  from {
    opacity: 0;
    transform: translateY(4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes icon-rotor {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@keyframes boot-sweep {
  from {
    transform: translateX(-100%);
  }
  to {
    transform: translateX(100%);
  }
}

@media (prefers-reduced-motion: reduce) {
  .reveal,
  .icon-rotor,
  .boot-pulse::after,
  .boot-skeleton-card::after {
    animation: none !important;
  }
}

@media (max-width: 900px) {
  .accounts-grid {
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  }
}

@media (max-width: 720px) {
  .shell {
    width: calc(100vw - 1rem);
    padding: 0.7rem 0 0.9rem;
  }

  .topbar {
    flex-direction: column;
    align-items: stretch;
  }

  .top-actions {
    justify-content: flex-start;
  }

  .context-menu {
    width: min(420px, calc(100vw - 1rem));
  }

  .settings-menu {
    width: min(420px, calc(100vw - 1rem));
  }

  .context-row {
    grid-template-columns: 1fr;
  }

  .automation-option {
    grid-template-columns: 1fr;
  }

  .automation-option input {
    margin-top: 0;
    justify-self: start;
  }

  .mini-grid {
    grid-template-columns: 1fr;
  }

  .card-actions {
    flex-direction: column;
    align-items: stretch;
  }

  .icon-actions {
    justify-content: flex-end;
  }
}
